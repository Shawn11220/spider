<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Spider Graph Visualizer</title>

    <!-- 
    ============================================================================
    SPIDER GRAPH VISUALIZER - FRONTEND
    ============================================================================
    
    This page provides a realtime visualization of the Spider graph database.
    It uses Sigma.js with WebGL for high-performance rendering of 5000+ nodes.
    
    Key Features:
    - WebSocket connection for realtime updates
    - Force-directed layout using ForceAtlas2
    - Cluster-based coloring
    - Interactive zoom/pan/hover
    ============================================================================
    -->

    <!-- Sigma.js - WebGL-based graph visualization library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/sigma.js/2.4.0/sigma.min.js"></script>

    <!-- Graphology - Graph data structure library (required by Sigma.js v2) -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/graphology/0.25.4/graphology.umd.min.js"></script>

    <!-- ForceAtlas2 layout algorithm for organic graph layout -->
    <script
        src="https://cdn.jsdelivr.net/npm/graphology-layout-forceatlas2@0.10.1/build/graphology-layout-forceatlas2.min.js"></script>

    <!-- NOverlap layout - prevents node overlap after force layout -->
    <script
        src="https://cdn.jsdelivr.net/npm/graphology-layout-noverlap@0.4.2/build/graphology-layout-noverlap.min.js"></script>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- ================================================================== -->
    <!-- HEADER BAR                                                          -->
    <!-- ================================================================== -->
    <header id="header">
        <div class="logo">
            <span class="logo-icon">ğŸ•¸ï¸</span>
            <span class="logo-text">Spider Graph</span>
        </div>
        <div id="connection-status" class="status disconnected">
            <span class="status-dot"></span>
            <span class="status-text">Disconnected</span>
        </div>
    </header>

    <!-- ================================================================== -->
    <!-- MAIN GRAPH CONTAINER                                                -->
    <!-- This is where Sigma.js renders the graph using WebGL               -->
    <!-- ================================================================== -->
    <main id="graph-container"></main>

    <!-- ================================================================== -->
    <!-- STATS PANEL (Top Right)                                             -->
    <!-- Shows node/edge/cluster counts                                      -->
    <!-- ================================================================== -->
    <aside id="stats-panel">
        <h3>ğŸ“Š Statistics</h3>
        <div class="stat-row">
            <span class="stat-label">Nodes:</span>
            <span id="node-count" class="stat-value">0</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Edges:</span>
            <span id="edge-count" class="stat-value">0</span>
        </div>
        <div class="stat-row">
            <span class="stat-label">Clusters:</span>
            <span id="cluster-count" class="stat-value">0</span>
        </div>
    </aside>

    <!-- ================================================================== -->
    <!-- LEGEND PANEL (Bottom Left)                                          -->
    <!-- Shows cluster colors dynamically                                    -->
    <!-- ================================================================== -->
    <aside id="legend-panel">
        <h3>ğŸ¨ Clusters</h3>
        <div id="cluster-legend">
            <!-- Populated dynamically by JavaScript -->
        </div>
    </aside>

    <!-- ================================================================== -->
    <!-- NODE INFO PANEL (appears on hover)                                  -->
    <!-- ================================================================== -->
    <div id="node-info" class="hidden">
        <h4 id="node-info-title">Node</h4>
        <p id="node-info-content"></p>
        <div class="node-info-meta">
            <span>Cluster: <span id="node-info-cluster">-</span></span>
            <span>Significance: <span id="node-info-sig">-</span></span>
        </div>
    </div>

    <!-- ================================================================== -->
    <!-- CONTROLS PANEL (Bottom Right)                                      -->
    <!-- ================================================================== -->
    <aside id="controls-panel">
        <button id="btn-layout" title="Re-run layout algorithm">
            ğŸ”„ Re-Layout
        </button>
        <button id="btn-fit" title="Fit graph to view">
            ğŸ” Fit View
        </button>
    </aside>

    <!-- Main application JavaScript -->
    <script src="app.js"></script>
</body>

</html>